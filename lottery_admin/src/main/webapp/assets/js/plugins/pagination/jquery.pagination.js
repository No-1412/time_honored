(function(c){c.PaginationCalculator=function(a,b){this.maxentries=a;this.opts=b};c.extend(c.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(a){var b=Math.floor(this.opts.num_display_entries/2),e=this.numPages(),c=e-this.opts.num_display_entries;return{start:a>b?Math.max(Math.min(a-b,c),0):0,end:a>b?Math.min(a+b+this.opts.num_display_entries%2,e):Math.min(this.opts.num_display_entries,e)}}});c.PaginationRenderers=
{};c.PaginationRenderers.defaultRenderer=function(a,b){this.maxentries=a;this.opts=b;this.pc=new c.PaginationCalculator(a,b)};c.extend(c.PaginationRenderers.defaultRenderer.prototype,{createLink:function(a,b,e){var f=this.pc.numPages();a=0>a?0:a<f?a:f-1;e=c.extend({text:a+1,classes:""},e||{});b=a==b?c("<span class='current'>"+e.text+"</span>"):c("<a>"+e.text+"</a>").attr("href",this.opts.link_to.replace(/__id__/,a));e.classes&&b.addClass(e.classes);b.data("page_id",a);return b},appendRange:function(a,
b,c,f,d){for(;c<f;c++)this.createLink(c,b,d).appendTo(a)},getLinks:function(a,b){var e,f=this.pc.getInterval(a),d=this.pc.numPages(),g=c("<div class='pagination'></div>");this.opts.prev_text&&(0<a||this.opts.prev_show_always)&&g.append(this.createLink(a-1,a,{text:this.opts.prev_text,classes:"prev"}));0<f.start&&0<this.opts.num_edge_entries&&(e=Math.min(this.opts.num_edge_entries,f.start),this.appendRange(g,a,0,e,{classes:"sp"}),this.opts.num_edge_entries<f.start&&this.opts.ellipse_text&&jQuery("<span>"+
this.opts.ellipse_text+"</span>").appendTo(g));this.appendRange(g,a,f.start,f.end);f.end<d&&0<this.opts.num_edge_entries&&(d-this.opts.num_edge_entries>f.end&&this.opts.ellipse_text&&jQuery("<span>"+this.opts.ellipse_text+"</span>").appendTo(g),e=Math.max(d-this.opts.num_edge_entries,f.end),this.appendRange(g,a,e,d,{classes:"ep"}));this.opts.next_text&&(a<d-1||this.opts.next_show_always)&&g.append(this.createLink(a+1,a,{text:this.opts.next_text,classes:"next"}));c("a",g).click(b);g.append("<em class='totalNum'>总数："+this.maxentries+"条</em>");return g}});c.fn.pagination=
function(a,b){function e(a){var b=c(a.target).data("page_id");(b=f(b))||a.stopPropagation();return b}function f(a){d.data("current_page",a);h=g.getLinks(a,e);d.empty();h.appendTo(d);return b.callback(a,d)}b=jQuery.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"javascript:;",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",load_first_page:!1,callback:function(){return!1}},b||{});var d=
this,g,h,k;k=b.current_page;d.data("current_page",k);a=!a||0>a?1:a;b.items_per_page=!b.items_per_page||0>b.items_per_page?1:b.items_per_page;if(!c.PaginationRenderers[b.renderer])throw new ReferenceError("Pagination renderer '"+b.renderer+"' was not found in jQuery.PaginationRenderers object.");g=new c.PaginationRenderers[b.renderer](a,b);var l=(new c.PaginationCalculator(a,b)).numPages();d.bind("setPage",{numPages:l},function(a,b){if(0<=b&&b<a.data.numPages)return f(b),!1});d.bind("prevPage",function(a){a=
c(this).data("current_page");0<a&&f(a-1);return!1});d.bind("nextPage",{numPages:l},function(a){var b=c(this).data("current_page");b<a.data.numPages-1&&f(b+1);return!1});h=g.getLinks(k,e);d.empty();h.appendTo(d);b.load_first_page&&b.callback(k,d)}})(jQuery);